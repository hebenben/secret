(function(){let o={};const n=function(n,t){let e=o[n];e||(o[n]=[],e=o[n]),e.includes(t)||e.push(t)},t=function(n,t){let e=o[n]||[],c=e.indexOf(t);-1!==c&&(e[c]=null)},e=function(n,...t){let e,c=o[n]||[],l=0;for(;l<c.length;l++)e=c[l],"function"!=typeof e?(c.splice(l,1),l--):e(...t)};let c={on:n,off:t,emit:e};"object"==typeof module&&"object"==typeof module.exports&&(module.exports=c),"undefined"!=typeof window&&(window.$sub=c)})(),async function(){let o=document.querySelector(".contentAccount"),n=o.querySelector(".accountLogo"),t=o.querySelector(".helloAccount"),e=o.querySelector(".logoutButton"),c=document.querySelector(".loginWrap"),l=document.querySelector(".accountClose"),u=document.querySelector(".backButton");document.querySelector(".buttonInfo");console.log(e);const i=async function(){let{code:o,data:n}=await axios.get("/user/info");0==+o&&(t.innerHTML=`<span class="highlight">Hello</span> ${n.name} `)};$sub.on("INDEX",i);const s=function(){e.onclick=async function(){let o=confirm("确定退出?");o&&(location.href="login.html")}};$sub.on("INDEX",s);const a=function(){l.onclick=async function(){c.style.display="none"}};$sub.on("INDEX",a);const r=function(){n.onclick=async function(){c.style.display="block"}};$sub.on("INDEX",r);const f=async function(){let{code:o,power:n}=await axios.get("/user/power");console.log(n),1!=+o&&(u.onclick=function(){location.href="main.html"})};$sub.on("INDEX",f);const y=async function(){try{let{code:o}=await axios.get("/user/login");1==+o&&(alert("还未登录"),location.href="login.html"),$sub.emit("INDEX")}catch(o){location.href="login.html"}};y()}();