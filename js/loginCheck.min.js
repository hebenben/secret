(function(){let n={};const o=function(o,t){let e=n[o];e||(n[o]=[],e=n[o]),e.includes(t)||e.push(t)},t=function(o,t){let e=n[o]||[],c=e.indexOf(t);-1!==c&&(e[c]=null)},e=function(o,...t){let e,c=n[o]||[],l=0;for(;l<c.length;l++)e=c[l],"function"!=typeof e?(c.splice(l,1),l--):e(...t)};let c={on:o,off:t,emit:e};"object"==typeof module&&"object"==typeof module.exports&&(module.exports=c),"undefined"!=typeof window&&(window.$sub=c)})(),async function(){let n=document.querySelector(".contentAccount"),o=document.querySelector(".accountLogo"),t=n.querySelector(".helloAccount"),e=n.querySelector(".logoutButton"),c=document.querySelector(".loginWrap"),l=document.querySelector(".backButton"),i=document.querySelector(".accountClose");console.log(e);const u=async function(){let{code:n,data:o}=await axios.get("/user/info");0==+n&&(t.innerHTML=`<span class="highlight">Hello</span> ${o.name} `)};$sub.on("INDEX",u);const s=function(){e.onclick=async function(){let n=confirm("确定退出?");n&&(await axios.get("/user/signout"),location.href="login.html")}};$sub.on("INDEX",s);const a=function(){l.onclick=async function(){location.href="main.html"}};$sub.on("INDEX",a);const r=function(){i.onclick=async function(){c.style.display="none"}};$sub.on("INDEX",r);const f=function(){o.onclick=async function(){c.style.display="block"}};$sub.on("INDEX",f);const d=async function(){let{code:n,power:o}=await axios.get("/user/power");console.log(o),1!=+n&&(window.onclick=function(t){let e=t.target;e.tagName,e.innerText.trim();/(userhandle|departhandle|jobhandle)/i.test(o)||0!==n||alert("您没有权限,请交钱")})};$sub.on("INDEX",d);const y=async function(){try{let{code:n}=await axios.get("/user/login");1==+n&&(alert("还未登录"),location.href="login.html"),$sub.emit("INDEX")}catch(n){}};y()}();