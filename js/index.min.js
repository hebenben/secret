(function(){let t={};const e=function(e,n){let o=t[e];o||(t[e]=[],o=t[e]),o.includes(n)||o.push(n)},n=function(e,n){let o=t[e]||[],c=o.indexOf(n);-1!==c&&(o[c]=null)},o=function(e,...n){let o,c=t[e]||[],l=0;for(;l<c.length;l++)o=c[l],"function"!=typeof o?(c.splice(l,1),l--):o(...n)};let c={on:e,off:n,emit:o};"object"==typeof module&&"object"==typeof module.exports&&(module.exports=c),"undefined"!=typeof window&&(window.$sub=c)})(),async function(){let t=document.querySelector(".contentAccount"),e=t.querySelector(".accountLogo"),n=t.querySelector(".helloAccount"),o=t.querySelector(".logoutButton"),c=document.querySelector(".loginWrap"),l=document.querySelector(".accountClose"),i=document.querySelector(".buttonPic"),u=document.querySelector(".buttonMusic"),a=document.querySelector(".buttonInfo");console.log(o);const r=async function(){let{code:t,data:e}=await axios.get("/user/info");0==+t&&(n.innerHTML=`<span class="highlight">Hello</span> ${e.name} `)};$sub.on("INDEX",r);const s=function(){o.onclick=async function(){let t=confirm("确定退出?");t&&(location.href="login.html")}};$sub.on("INDEX",s);const f=function(){l.onclick=async function(){c.style.display="none"}};$sub.on("INDEX",f);const d=function(){e.onclick=async function(){c.style.display="block"}};$sub.on("INDEX",d);const h=async function(){let{code:t,power:e}=await axios.get("/user/power");console.log(e),1!=+t&&(a.onclick=function(t){let n=t.target,o=(n.tagName,n.innerText.trim());/(userhandle|departhandle|jobhandle)/i.test(e)?"MORE"!==o||(location.href="introduce.html"):alert("您没有权限,请交钱")},i.onclick=function(t){let n=t.target,o=(n.tagName,n.innerText.trim());/(userhandle|departhandle|jobhandle)/i.test(e)?"MORE"!==o||(location.href="stillPhotography.html"):alert("您没有权限,请交钱")},u.onclick=function(t){let n=t.target,o=(n.tagName,n.innerText.trim());/(userhandle|departhandle|jobhandle)/i.test(e)?"MORE"!==o||(location.href="music.html"):alert("您没有权限,请交钱")})};$sub.on("INDEX",h);const m=async function(){try{let{code:t}=await axios.get("/user/login");1==+t&&(alert("还未登录"),location.href="login.html"),$sub.emit("INDEX")}catch(t){location.href="login.html"}};m()}();